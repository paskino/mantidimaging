
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.17: http://docutils.sourceforge.net/" />

  
    <title>mantidimaging.core.operations.roi_normalisation.roi_normalisation module &#8212; MantidImaging 2.1.0 documentation</title>
  
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../_static/classic.css" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../_static/extra.css" />
    
    <script id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/language_data.js"></script>
    
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="mantidimaging.core.operations.rotate_stack.rotate_stack module" href="mantidimaging.core.operations.rotate_stack.rotate_stack.html" />
    <link rel="prev" title="mantidimaging.core.operations.ring_removal.ring_removal module" href="mantidimaging.core.operations.ring_removal.ring_removal.html" /> 
  </head><body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="mantidimaging.core.operations.rotate_stack.rotate_stack.html" title="mantidimaging.core.operations.rotate_stack.rotate_stack module"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="mantidimaging.core.operations.ring_removal.ring_removal.html" title="mantidimaging.core.operations.ring_removal.ring_removal module"
             accesskey="P">previous</a> |</li>
  
        <li class="nav-item nav-item-0"><a href="../index.html">MantidImaging 2.1.0 documentation</a> &#187;</li>
  
          <li class="nav-item nav-item-1"><a href="../user_guide/index.html" >User Guide</a> &#187;</li>
          <li class="nav-item nav-item-2"><a href="../user_guide/operations/index.html" accesskey="U">Operations</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">mantidimaging.core.operations.roi_normalisation.roi_normalisation module</a></li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <section id="module-mantidimaging.core.operations.roi_normalisation.roi_normalisation">
<span id="mantidimaging-core-operations-roi-normalisation-roi-normalisation-module"></span><h1>mantidimaging.core.operations.roi_normalisation.roi_normalisation module<a class="headerlink" href="#module-mantidimaging.core.operations.roi_normalisation.roi_normalisation" title="Permalink to this headline">¶</a></h1>
<dl class="py class">
<dt id="mantidimaging.core.operations.roi_normalisation.roi_normalisation.RoiNormalisationFilter">
<em class="property">class </em><code class="sig-prename descclassname">mantidimaging.core.operations.roi_normalisation.roi_normalisation.</code><code class="sig-name descname">RoiNormalisationFilter</code><a class="reference internal" href="../_modules/mantidimaging/core/operations/roi_normalisation/roi_normalisation.html#RoiNormalisationFilter"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mantidimaging.core.operations.roi_normalisation.roi_normalisation.RoiNormalisationFilter" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="mantidimaging.core.operations.base_filter.html#mantidimaging.core.operations.base_filter.BaseFilter" title="mantidimaging.core.operations.base_filter.BaseFilter"><code class="xref py py-class docutils literal notranslate"><span class="pre">mantidimaging.core.operations.base_filter.BaseFilter</span></code></a></p>
<p>Normalises the image data by the average values in a region of interest.</p>
<p>Intended to be used on: Projections</p>
<p>When: Always, to ensure that any fluctuations in beam intensity are normalised.</p>
<p>Caution: If you see horizontal lines in the sinogram this means some projections
are brighter/darker than the rest. This can be fixed with this operation.</p>
<dl class="py method">
<dt id="mantidimaging.core.operations.roi_normalisation.roi_normalisation.RoiNormalisationFilter.execute_wrapper">
<em class="property">static </em><code class="sig-name descname">execute_wrapper</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">roi_field</span></em>, <em class="sig-param"><span class="n">norm_mode</span></em>, <em class="sig-param"><span class="n">flat_field</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/mantidimaging/core/operations/roi_normalisation/roi_normalisation.html#RoiNormalisationFilter.execute_wrapper"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mantidimaging.core.operations.roi_normalisation.roi_normalisation.RoiNormalisationFilter.execute_wrapper" title="Permalink to this definition">¶</a></dt>
<dd><p>Should construct a partial call to _filter_func using values taken from the widgets passed to this function
as kwargs.
:param kwargs: widgets which contain values required for _filter_func.
:return: a partial call to _filter_func using parameters taken from the input widgets.</p>
</dd></dl>

<dl class="py method">
<dt id="mantidimaging.core.operations.roi_normalisation.roi_normalisation.RoiNormalisationFilter.filter_func">
<em class="property">static </em><code class="sig-name descname">filter_func</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">images</span><span class="p">:</span> <span class="n"><a class="reference internal" href="mantidimaging.core.data.images.html#mantidimaging.core.data.images.Images" title="mantidimaging.core.data.images.Images">mantidimaging.core.data.images.Images</a></span></em>, <em class="sig-param"><span class="n">region_of_interest</span><span class="p">:</span> <span class="n">mantidimaging.core.utility.sensible_roi.SensibleROI</span> <span class="o">=</span> <span class="default_value">None</span></em>, <em class="sig-param"><span class="n">normalisation_mode</span><span class="p">:</span> <span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)">str</a></span> <span class="o">=</span> <span class="default_value">'Preserve Max'</span></em>, <em class="sig-param"><span class="n">flat_field</span><span class="p">:</span> <span class="n">Optional<span class="p">[</span><a class="reference internal" href="mantidimaging.core.data.images.html#mantidimaging.core.data.images.Images" title="mantidimaging.core.data.images.Images">mantidimaging.core.data.images.Images</a><span class="p">]</span></span> <span class="o">=</span> <span class="default_value">None</span></em>, <em class="sig-param"><span class="n">cores</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">chunksize</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">progress</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/mantidimaging/core/operations/roi_normalisation/roi_normalisation.html#RoiNormalisationFilter.filter_func"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mantidimaging.core.operations.roi_normalisation.roi_normalisation.RoiNormalisationFilter.filter_func" title="Permalink to this definition">¶</a></dt>
<dd><p>Normalise by beam intensity.</p>
<p>This does NOT do any checks if the Air Region is out of bounds!
If the Air Region is out of bounds, the crop will fail at runtime.
If the Air Region is in bounds, but has overlapping coordinates
the crop give back a 0 shape of the coordinates that were wrong.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>images</strong> – Sample data which is to be processed. Expected in radiograms</p></li>
<li><p><strong>region_of_interest</strong> – The order is - Left Top Right Bottom. The air region
from which sums will be calculated and all images will
be normalised.</p></li>
<li><p><strong>normalisation_mode</strong> – <p>Controls what the air regions are normalised to.
‘Preserve Max’ : Normalisation is scaled such that the the maximum pixel value of the stack is equal before</p>
<blockquote>
<div><p>and after the operation.</p>
</div></blockquote>
<p>’Stack Average’ : The mean value of the air region across all projections is preserved.
‘Flat Field’ : The mean value of the air regions in the projections is made equal to the mean value of the</p>
<blockquote>
<div><p>air region in the flat field.</p>
</div></blockquote>
</p></li>
<li><p><strong>flat_field</strong> – If ‘Flat Field’ mode is used, pass in the flat field images.</p></li>
<li><p><strong>cores</strong> – The number of cores that will be used to process the data.</p></li>
<li><p><strong>chunksize</strong> – The number of chunks that each worker will receive.</p></li>
<li><p><strong>progress</strong> – Reference to a progress bar object</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Filtered data (stack of images)</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt id="mantidimaging.core.operations.roi_normalisation.roi_normalisation.RoiNormalisationFilter.filter_name">
<code class="sig-name descname">filter_name</code><em class="property"> = 'ROI Normalisation'</em><a class="headerlink" href="#mantidimaging.core.operations.roi_normalisation.roi_normalisation.RoiNormalisationFilter.filter_name" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="mantidimaging.core.operations.roi_normalisation.roi_normalisation.RoiNormalisationFilter.group_name">
<em class="property">static </em><code class="sig-name descname">group_name</code><span class="sig-paren">(</span><span class="sig-paren">)</span> &#x2192; <a class="reference internal" href="mantidimaging.core.operations.base_filter.html#mantidimaging.core.operations.base_filter.FilterGroup" title="mantidimaging.core.operations.base_filter.FilterGroup">mantidimaging.core.operations.base_filter.FilterGroup</a><a class="reference internal" href="../_modules/mantidimaging/core/operations/roi_normalisation/roi_normalisation.html#RoiNormalisationFilter.group_name"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mantidimaging.core.operations.roi_normalisation.roi_normalisation.RoiNormalisationFilter.group_name" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt id="mantidimaging.core.operations.roi_normalisation.roi_normalisation.RoiNormalisationFilter.link_histograms">
<code class="sig-name descname">link_histograms</code><em class="property"> = True</em><a class="headerlink" href="#mantidimaging.core.operations.roi_normalisation.roi_normalisation.RoiNormalisationFilter.link_histograms" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="mantidimaging.core.operations.roi_normalisation.roi_normalisation.RoiNormalisationFilter.register_gui">
<em class="property">static </em><code class="sig-name descname">register_gui</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">form</span></em>, <em class="sig-param"><span class="n">on_change</span></em>, <em class="sig-param"><span class="n">view</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/mantidimaging/core/operations/roi_normalisation/roi_normalisation.html#RoiNormalisationFilter.register_gui"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mantidimaging.core.operations.roi_normalisation.roi_normalisation.RoiNormalisationFilter.register_gui" title="Permalink to this definition">¶</a></dt>
<dd><p>Adds any required input widgets to the given form and returns references to them.</p>
<p>The return values should be in a dict which can be unpacked as kwargs for a call to
the operations <cite>execute_wrapper</cite>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>view</strong> – </p></li>
<li><p><strong>form</strong> – the layout to create input widgets in</p></li>
<li><p><strong>on_change</strong> – the filter view action to be bound to all created inputs</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>the widgets bound as kwargs which are needed to call execute_wrapper</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py function">
<dt id="mantidimaging.core.operations.roi_normalisation.roi_normalisation.enable_correct_fields_only">
<code class="sig-prename descclassname">mantidimaging.core.operations.roi_normalisation.roi_normalisation.</code><code class="sig-name descname">enable_correct_fields_only</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">text</span></em>, <em class="sig-param"><span class="n">flat_file_widget</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/mantidimaging/core/operations/roi_normalisation/roi_normalisation.html#enable_correct_fields_only"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mantidimaging.core.operations.roi_normalisation.roi_normalisation.enable_correct_fields_only" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py function">
<dt id="mantidimaging.core.operations.roi_normalisation.roi_normalisation.modes">
<code class="sig-prename descclassname">mantidimaging.core.operations.roi_normalisation.roi_normalisation.</code><code class="sig-name descname">modes</code><span class="sig-paren">(</span><span class="sig-paren">)</span> &#x2192; List<span class="p">[</span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)">str</a><span class="p">]</span><a class="reference internal" href="../_modules/mantidimaging/core/operations/roi_normalisation/roi_normalisation.html#modes"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mantidimaging.core.operations.roi_normalisation.roi_normalisation.modes" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</section>


            <div class="clearer"></div>
          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h4>Previous topic</h4>
  <p class="topless"><a href="mantidimaging.core.operations.ring_removal.ring_removal.html"
                        title="previous chapter">mantidimaging.core.operations.ring_removal.ring_removal module</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="mantidimaging.core.operations.rotate_stack.rotate_stack.html"
                        title="next chapter">mantidimaging.core.operations.rotate_stack.rotate_stack module</a></p>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" />
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>$('#searchbox').show(0);</script>
<div class="versions">
<h3>Versions</h3>
<ul>
  <li><a href="../index.html">Latest</a></li>
  <li><a href="../0.9.0/index.html">0.9.0</a></li>
  <li><a href="../1.0.0/index.html">1.0.0</a></li>
  <li><a href="../1.1.0/index.html">1.1.0</a></li>
  <li><a href="../2.0.0/index.html">2.0.0</a></li>
</ul>
</div>

        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="mantidimaging.core.operations.rotate_stack.rotate_stack.html" title="mantidimaging.core.operations.rotate_stack.rotate_stack module"
             >next</a> |</li>
        <li class="right" >
          <a href="mantidimaging.core.operations.ring_removal.ring_removal.html" title="mantidimaging.core.operations.ring_removal.ring_removal module"
             >previous</a> |</li>
  
        <li class="nav-item nav-item-0"><a href="../index.html">MantidImaging 2.1.0 documentation</a> &#187;</li>
  
          <li class="nav-item nav-item-1"><a href="../user_guide/index.html" >User Guide</a> &#187;</li>
          <li class="nav-item nav-item-2"><a href="../user_guide/operations/index.html" >Operations</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">mantidimaging.core.operations.roi_normalisation.roi_normalisation module</a></li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright 2017-2020, Mantid Project.
      Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 3.3.1.
    </div>
  </body>
</html>